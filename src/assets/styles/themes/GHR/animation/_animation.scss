@mixin keyframes($animation-name) {
    @-webkit-keyframes #{$animation-name} {
        @content;
    }
    @-moz-keyframes #{$animation-name} {
        @content;
    }  
    @-ms-keyframes #{$animation-name} {
        @content;
    }
    @keyframes #{$animation-name} {
        @content;
    }
}

@mixin animation($str) {
  -webkit-animation: #{$str};
  -moz-animation: #{$str};
  -ms-animation: #{$str};
  -o-animation: #{$str};
  animation: #{$str};   

}

@mixin stop($property: forwards) {
  animation-fill-mode: forwards; /* this prevents the animation from restarting! */
   -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */
   -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */
  -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

}

.animate__3--container {
  position: relative;
  display: inline-block;
  white-space: nowrap;
  vertical-align: middle;
  width: 100%;
  margin: 0 auto;
  height: 160px;
  overflow: hidden;
  z-index: $zIndex-1;
  @include basicGradient(0%, $blue-1, 50%, $blue-3);
}

.animate__3--mid--bkg,
.animate__3--mid--bkg--2 {
    height: 160px;
    width: 3000px;
    background: url(../images/grass--3_back.svg);
    background-repeat: repeat-x;
    background-position: bottom;
	position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
	z-index: $zIndex-2;
    @include animation('move-left-mid 2s linear infinite');
    @include stop();
}

.animate__3--mid--bkg--2 {
     @include animation('move-left-mid 2s 1');
     @include stop();
}

.animate__3--fore--bkg,
.animate__3--fore--bkg--2 {
    height: 160px;
    width: 3000px;
    background: url(../images/grass--3_front.svg) no-repeat;
 	position: absolute;
    background-repeat: repeat-x;
	top: 10%; left: 0; right: 0; bottom: 0;
	z-index: $zIndex-3;
     @include animation('move-left-fore 2s linear infinite');
    @include stop();
}

.animate__3--fore--bkg--2 {
    @include animation('move-left-fore 2s 1');
     @include stop();
}

@include keyframes(move-left-fore) {
  0% { left: -200%; }
  100% { left: 0%; }
}


@include keyframes(move-left-mid) {
  0% { left: -100%; }
  100% { left: -10%; }
}

.animate__3--truck,
.animate__3--truck--2  {
 background: url(../images/towTruck_spinningLoop.svg) no-repeat;
 position: absolute;
 top: 44%; left: 100%; right: 0; bottom: 0;
 z-index: inherit;
 width: 200px;
 @include animation('move-left-truck 2s 1');
 @include stop();
 transform-origin: center center;
  z-index: $zIndex-5;
}

.animate__3--truck--2 {
     background: url(../images/towTruck.svg) no-repeat;
 @include animation('move-left-truck-2 2s 1');
 transform-origin: center center;
  z-index: $zIndex-6;
 @include stop();
}

.animate__3--mechanic {
    background: url(../images/mechanic.svg) no-repeat;
    position: absolute;
    width: 44px;
    height: 74px;
    z-index: 501;
    left: 57.5%;
    top: 52%;
    opacity: 0;
    @include animation('fade-in-mechanic 2s 1');
    -webkit-animation-delay: 2s; /* Safari 4.0 - 8.0 */
    animation-delay: 2s;
    @include stop();
}

@keyframes fade-in-mechanic {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@include keyframes(move-left-truck) {
  0% { left: 100%; }
  100% { left: 40%; }
}

@include keyframes(move-left-truck-2) {
  0% { left: 100%; }
  100% { left: 25%; }
}

.animate__3--carFamily {
 background: url(../images/carAndFamily.svg) no-repeat;
    position: absolute;
    top: 45%;
    right: 0;
    bottom: 10%;
    z-index: inherit;
    width: 200px;
    transform-origin: center center;
    z-index: 600;
    width: 150px;
    @include animation('move-left-car 2s 1');
    @include stop();
 transform-origin: center center;
  z-index: $zIndex-5;
}

@include keyframes(move-left-car) {
  0% { left: -19%; }
  100% { left: 60%; }
}

.animate__3--road {
    position: absolute;
    top: 81%; left: 0; right: 0; bottom: 0;
    z-index: 400;
    width: inherit;
    height: 30px;
    background-color: #afb3b7;
    display: block;
}

.animate__3--road:before {
    content: '';
    position: absolute;
    top: -23%; left: 0; right: 0; bottom: 0;
    z-index: 400;
    width: inherit;
    height: 10px;
    background-color:$green-1;
    display: block;
}

.animate__3--title {
    position: absolute;
    text-align: center;
    z-index: 1002;
    width: 100%;
    margin: 0 auto;
    color: white;
    font-size: 1.5rem;
    margin-top: 1rem;
  
    @include animation('fade-in 2s 1');
    @include stop();
}

@keyframes fade-in {
  0% {
    opacity: 0;
  }
  80% {
      opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

//tow truck - scene 1
@media (max-width: $breakpoint-small) { 
    .animate__3--truck {
        margin-left: -17%;
    }
}

@media (max-width: $breakpoint-medium) { 
    .animate__3--truck {
        margin-left: -5%;
    }

    .animate__3--mechanic {
        left: 56%;
    }
}

@media (max-width: 675px) { 
    .animate__3--truck {
        margin-left: -7%;
    }
}

@media (max-width: 564px) { 
    .animate__3--truck {
        margin-left: -10%;
    }

}

@media (max-width: 490px) { 
    .animate__3--truck {
        margin-left: -16%;
    }

    .animate__3--truck--2 {
        margin-left: -16%;
    }
}

// CSS for spinning wheel - currently embedded in SVG
// 	.wheel {
		
// 		transform-origin: center center;
// 		width: 21px;
// 		height: 22px;
// 		    -webkit-animation:spin 2s linear 1;
//     -moz-animation:spin 2s linear 1;
//     animation:spin 2s linear 1;
// 	}

// 	@-moz-keyframes spin { 100% { -moz-transform: rotate(-360deg); } }
// @-webkit-keyframes spin { 100% { -webkit-transform: rotate(-360deg); } }
// @keyframes spin { 100% { -webkit-transform: rotate(-360deg); transform:rotate(-360deg); } }